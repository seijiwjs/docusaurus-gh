<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Events and Listeners | Zea Engine Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.zea.live//docusaurus-gh/Manual/Concepts/events"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Events and Listeners | Zea Engine Docs"><meta data-react-helmet="true" name="description" content="Within the DOM, events are emitted from DOM elements for various reasons, including notifying the consumer that an image has finished loading, or that a user has clicked on a certain element in the DOM tree. Developers can register listener functions to the DOM and determine appropriate responses to these events using JavaScript."><meta data-react-helmet="true" property="og:description" content="Within the DOM, events are emitted from DOM elements for various reasons, including notifying the consumer that an image has finished loading, or that a user has clicked on a certain element in the DOM tree. Developers can register listener functions to the DOM and determine appropriate responses to these events using JavaScript."><link data-react-helmet="true" rel="shortcut icon" href="/docusaurus-gh/img/favicon2.ico"><link data-react-helmet="true" rel="canonical" href="https://www.zea.live//docusaurus-gh/Manual/Concepts/events"><link data-react-helmet="true" rel="alternate" href="https://www.zea.live//docusaurus-gh/Manual/Concepts/events" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.zea.live//docusaurus-gh/Manual/Concepts/events" hreflang="x-default"><link rel="stylesheet" href="/docusaurus-gh/assets/css/styles.29d64f8c.css">
<link rel="preload" href="/docusaurus-gh/assets/js/runtime~main.0f04fa28.js" as="script">
<link rel="preload" href="/docusaurus-gh/assets/js/main.225e914b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docusaurus-gh/"><img src="/docusaurus-gh/img/logo-zea.svg" alt="Zea logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docusaurus-gh/img/logo-zea.svg" alt="Zea logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docusaurus-gh/">Manual</a><a class="navbar__item navbar__link" href="/docusaurus-gh/API/index">API</a><a class="navbar__item navbar__link" href="/docusaurus-gh/Tutorials/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/docusaurus-gh/Plugins/plugins-templates-overview">Plugins</a><a class="navbar__item navbar__link" href="/docusaurus-gh/Community/c1">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://zea.live" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>zea.live<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docusaurus-gh/">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Concepts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-gh/Manual/Concepts/zea-engine-architecture">Concepts Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-gh/Manual/Concepts/arch-overview">Architecture</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-gh/Manual/Concepts/transformations">Transformations</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docusaurus-gh/Manual/Concepts/events">Events and Listeners</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-gh/Manual/Concepts/geometry-rendering">Geometry and Rendering</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docusaurus-gh/Manual/Concepts/pbr-rendering">PBR (Physically Based Rendering)</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docusaurus-gh/Manual/resources">Resources</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docusaurus-gh/Manual/CHANGELOG">Changelog</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docusaurus-gh/Manual/acknowledgements">Acknowledgements</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Events and Listeners</h1></header><p>Within the <a href="https://developer.mozilla.org/en-US/docs/Glossary/DOM" target="_blank" rel="noopener noreferrer">DOM</a>, events are emitted from DOM elements for various reasons, including notifying the consumer that an image has finished loading, or that a user has clicked on a certain element in the DOM tree. Developers can register listener functions to the DOM and determine appropriate responses to these events using JavaScript.</p><p><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events</a></p><p>The event system in the engine is modelled on and extends the event system found in the browser, giving developers a familiar model to understand how to interact with the Scene tree.</p><blockquote><p>All classes within the Scene Tree can emit events. The list of events emitted by any class is listed in its API documentation.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="the-canvas-element"></a>The Canvas Element<a class="hash-link" href="#the-canvas-element" title="Direct link to heading">#</a></h2><p>The WebGL renderer is bound to a canvas element that lives in the DOM of a running web application. When a user interacts with the pages using the mouse or with a touch screen, events are emitted from the canvas element that the renderer is connected to. The Renderer uses these events to raycast into the scene and check for geometries directly under the mouse or touch location.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="hit-testing-events"></a>Hit Testing Events<a class="hash-link" href="#hit-testing-events" title="Direct link to heading">#</a></h2><p><img alt="events-hit-testing" src="/docusaurus-gh/assets/images/events-hit-testing-5a46c62ba0bf8f83871b87ebe9bfa2fa.svg"></p><p>One of the services provided by the Viewport class, is translating 2d screen coordinates into 3d hits on geometries. For any coordinate on the 2d region of the viewport, a ray can be computed. The intersection of any geometries hit by that ray in the scene can be retrieved.
Mouse or touch interactions on the viewport are transformed into rays and resulting hit information is included in the events that are then propagated throughout the scene tree.</p><p>The goal of this design is to emulate the event system we find in the browser, where listeners can be registered with items in the tree to detect interactions relevant to those items.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="event-propagation"></a>Event Propagation<a class="hash-link" href="#event-propagation" title="Direct link to heading">#</a></h2><p><img alt="events-propagation" src="/docusaurus-gh/assets/images/events-propagation-abc76645cd7c917cff2b35e11105a909.svg"></p><p>There isn&#x27;t automatic bubbling process in the zea engine tree to automatically propagate events up the tree. However, the scene tree does propagate a few events automatically up the tree.</p><p>?&gt; pointerDown, pointerMove, pointerUp, pointerEnter and pointerLeave</p><p>These events which are received by the viewport directly from the canvas element to which it is bound, is then propagated up the tree of any geometry found directly under the pointer(Mouse, Touch, VR controller) event.</p><p>To detect if any item in a tree has been clicked on, users can register listeners directly to the items in the hierarchy.</p><p>!&gt; The order of propagation starts from the Item itself, all the way up its hierarchy and finally reaching the viewport. If you want to prevent the event to reach further, just add <code>event.stopPropagation()</code> to your listener.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="groups"></a>Groups<a class="hash-link" href="#groups" title="Direct link to heading">#</a></h2><p>Groups receive events from their members, and propagate them. So a user can detect if any item in a given group is clicked on by adding listeners directly to the group.</p><p>Example:</p><p><img alt="events-propagation-groups" src="/docusaurus-gh/assets/images/events-propagation-groups-880279b0b57c5125088c15f77c22715b.svg">
<em>The geom that was clicked on by the mouse emits the ‘pointerDown’ event, which is propagated by its parent. The Group receives the event from the parent, and propagates it. A ‘pointerDown’ listener registered on the group will then receive the event.</em></p><p>Groups enable events to be aggregate from all members and propagated to any registered listeners.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>The event model in the engine should be familiar to web developers as it follows closely the design of events in the browser. By providing a low level event framework, developer can build higher level functionality according to their own specific requirements.</p><p>Here, we have a live demo with three event propagation and listener scenarios.</p><ul><li>The green square listens only to events triggered on itself.</li><li>The yellow-ish cylinder and torus geometries represent group events listening.</li><li>The blue cone listens to viewport events.</li></ul><p>The label on top of each geometry display the events triggered.</p><p>If you want to understand more of how everything works, check the code in the live demo by clicking in the &quot;View Source&quot; button on the bottom-right par of the frame.</p><iframe src="https://glitch.com/embed/#!/embed/zea-demo-pointer-events?path=index.html&amp;previewSize=100" class="glitch" markdown="1"></iframe></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docusaurus-gh/Manual/Concepts/transformations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Transformations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docusaurus-gh/Manual/Concepts/geometry-rendering"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Geometry and Rendering »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-canvas-element" class="table-of-contents__link">The Canvas Element</a></li><li><a href="#hit-testing-events" class="table-of-contents__link">Hit Testing Events</a></li><li><a href="#event-propagation" class="table-of-contents__link">Event Propagation</a></li><li><a href="#groups" class="table-of-contents__link">Groups</a></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Zea</div><ul class="footer__items"><li class="footer__item"><a href="https://www.zea.live/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.zea.live/en/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://community.zea.live/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Zea Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ZeaInc/zea-engine" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Zea Inc.</div></div></div></footer></div>
<script src="/docusaurus-gh/assets/js/runtime~main.0f04fa28.js"></script>
<script src="/docusaurus-gh/assets/js/main.225e914b.js"></script>
</body>
</html>